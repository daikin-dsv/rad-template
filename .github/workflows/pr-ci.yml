name: PR CI

on:
    pull_request:
    workflow_dispatch:

jobs:
    checks:
        name: ${{ matrix.name }}
        runs-on: ubuntu-latest
        strategy:
            fail-fast: false
            matrix:
                include:
                    - name: Build
                      command: npm run build
                    - name: Component Tests
                      command: npm run test:component
                    - name: Lint
                      command: npm run lint
                    - name: Format Check
                      command: npx prettier --check .
        steps:
            - uses: actions/checkout@v4

            - uses: actions/setup-node@v4
              with:
                  node-version: 'node'
                  check-latest: true
                  cache: npm

            - name: Install dependencies
              run: npm ci

            - name: Run ${{ matrix.name }}
              run: ${{ matrix.command }}
